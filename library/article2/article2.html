<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Медгаус С.В., Чернышова А.В. &ndash; Проектирование обфускатора для языка JavaScript</title>
	<!-- Font Awesome -->
	<link rel="stylesheet" href="../../css/font_awesome.min.css">
	<!-- Bootstrap core CSS -->
	<link href="../../css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Bootstrap -->
	<link href="../../css/mdb.min.css" rel="stylesheet">
	<!-- Your custom styles (optional) -->
	<link href="../../css/style.css" rel="stylesheet">
</head>

<body>
	<div class="mr-5 pr-5">
		<!--Navbar-->
		<nav class= "navbar fixed-top navbar-expand-lg navbar-dark stylish-color">
			<!-- Collapse button -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
			aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
			<!-- Collapsible content -->
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<!-- Links -->
				<ul class="navbar-nav mx-auto">
					<li class="nav-item">
						<a class="nav-link" href="../../index.html"><i class="fa fa-book mr-1"></i>Резюме</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../../bio/bio_ru.html"><i class="fa fa-user mr-1"></i>Биография</a>
					</li>
					<!-- Dropdown -->
					<li class="nav-item dropdown active">
						<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<i class="fa fa-graduation-cap mr-1"></i>Тематический раздел<span class="sr-only">(current)</span>
						</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" href="../../abstract/abstract_ru.html"><i class="fa fa-file-text mr-2"></i>Реферат</a>
							<a class="dropdown-item active" href="../../library/library_ru.html"><i class="fa fa-font mr-2"></i>Библиотека</a>
							<a class="dropdown-item" href="../../links/links_ru.html"><i class="fa fa-link mr-2"></i>Ссылки</a>
							<a class="dropdown-item" href="../../report/report_ru.html"><i class="fa fa-binoculars mr-2"></i>Отчёт о поиске</a>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../../individual/ind_ru.html">
							<i class="fa fa-coffee mr-1"></i>Индивидуальный раздел
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="http://donntu.ru" target="_blank">
							<i class="fa fa-university mr-1"></i>ДонНТУ
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="http://masters.donntu.ru" target="_blank">
							<i class="fa fa-users mr-1"></i>Портал магистров
						</a>
					</li>
				</ul>
				<!-- Links -->
			</div>
			<!-- Collapsible content -->
		</nav>
		<!--/.Navbar-->

		<div class="mb-1 mt-5 pt-3">
			<div class="row">
				<div class="col-1">
					<!--Back arrow-->
					<div class="sticky" style="position: fixed; top: 60px; left: 20px; font-size: 4rem;">
						<a href="../library_ru.html" target="_self">
							<img src="../../images/arrow-back.png" alt="" class="z-depth-1 hoverable rounded-circle">
						</a>
					</div>

				</div>

				<div class="col-11">
					<!--Card-->
					<div class="card">
						<!--Card content-->
						<div class="card-body text-justify">
							<p class="text-left">
								УДК 004.056.5
							</p>
							<p class="text-center h4"><b>
								Проектирование обфускатора для языка JavaScript
							</b></p>
							<p>
								<b>Авторы:</b> Медгаус С.В., Чернышова А.В.
							</p>
							<p>
								<b>Источник:</b> Сборник статей студенческой научно-технической  конференции,  г.Севастополь,  04  &ndash;  08  апреля  2016 г. / М-во  образования  и  науки  РФ,  Севастопольский  государственный университет; науч. ред. Е.Н. Мащенко &ndash; г. Севастополь: СевГУ, 2016. с. 164 &ndash; 167.
							</p>
							<p>
								<b>Аннотация: </b>
								<i>
									В тексте данной статьи описан процесс обфускации и существующие обфускаторы для языка JavaScript.Описаны возможные преобразования исходного кода для запутывания кода и для усложнения возможности реверс-инжиниринга. Исходя из анализа существующих обфускаторов, была предложена разработка обфускатора языка JavaScript с открытым кодом, реализующая сложные преобразования исходного кода. Также описаны технологии, которые будут использоваться для разбора программного кода.
								</i>
								<br>

								<b>Ключевые слова: </b>
								<i>
									JavaScript, обфускация, реверс-инжиниринг, синтаксическое дерево, запутывающие преобразования.
								</i>
							</p>
							<p>
								На сегодняшний день проблема сохранения прав на владение интеллектуальной собственностью стоит очень остро. В то время, как настольные приложения могут обеспечить себя различными средствами лицензирования и защиты, веб-приложения не могут защитить свой код, расположенный на стороне клиента от просмотра и изучения.
							</p>
							<p>
								Частично эту проблему решает перенос особенно важных частей кода на сторону сервера, что повлечёт за собой увеличение нагрузки на сервер и может потребовать увеличения мощности сервера или покупки дополнительного оборудования.
							</p>
							<p>
								Также решению этой проблемы может поспособствовать обфускация программного кода, передающегося клиенту. Обфускация не решит эту проблему полностью, так как возможность использовать реверс-инжиниринг остаётся, но вот потенциальная сложность деобфускации  и большие человеческие ресурсы должны отбить желание у злоумышленников разбирать чужой код и извлекать из него алгоритмы.
							</p>
							<p>
								Обфускация (от лат. obfuscare &ndash; затенять, затемнять; и англ. obfuscate &ndash; делать неочевидным, запутанным, сбивать с толку) или запутывание кода &ndash; приведение исходного текста или исполняемого кода программы к виду, сохраняющему его функциональность, но затрудняющему анализ и понимание алгоритмов работы.
							</p>
							<p>
								Для создания запутанного ассемблерного текста могут использоваться специализированные компиляторы, использующие неочевидные или недокументированные возможности среды исполнения программы. Существуют также специальные программы, производящие обфускацию, так называемые обфускаторы [<a href="https://ru.wikipedia.org/wiki/Обфускация" target="_blank">1</a>].
							</p>
							<p>
								На данный момент существуют 3 уровня обфускации. Первый и самый низкий уровень &ndash; обфускация машинных команд. Этот уровень обфускации наименее изучен, и поэтому наименее распространён.
							</p>
							<p>
								Следующий уровень &ndash; это уровень <q>байт-кода</q>, используемый для таких языков как Java или C#, в которых исходный код программы сначала преобразуется в байт-код, а уже потом преобразуется в машинный код. Этот уровень обфускации достаточно распространён.
							</p>
							<p>
								И последний, 3 уровень обфускации &ndash; это запутывание исходного кода на самом верхнем уровне. Этот уровень обфускации применим для скриптовых языков.
							</p>
							<p>
								Процессы обфускации можно классифицировать по видам, в зависимости от способа модификации кода программы.
							</p>
							<p>
								Лексическая обфускация заключается в форматировании кода программы, изменении его структуры, таким образом, чтобы он стал нечитабельным, менее информативным и трудным для изучения.
							</p>
							<p>
								Обфускация такого вида включает в себя:
								<ul>
									<li>удаление всех комментариев в коде программы, или изменение их на дезинформирующие;</li>
									<li>удаление различных пробелов, отступов которые обычно используют для лучшего визуального восприятия кода программы;</li>
									<li>удаление различных пробелов, отступов которые обычно используют для лучшего визуального восприятия кода программы;</li>
									<li>замену имён идентификаторов на произвольные длинные наборы символов, которые трудно воспринимать человеку;</li>
									<li>добавление различных лишних операций;</li>
									<li>изменение расположения блоков (функций, процедур) программы, таким образом, чтобы это никоим образом не повлияло на её работоспособность.</li>
								</ul>
							</p>
							<p>
								Обфускация данных связана с трансформацией структур данных. Она считается более сложной,  является наиболее продвинутой и часто используемой. Её принято делить на три основные группы:
								<ul>
									<li>обфускация хранения заключается в трансформации хранилищ данных, а также самих типов данных (например, создание и использование необычных типов данных, изменение представления существующих и т.д.);</li>
									<li>обфускация соединения  стремится к усложнению используемых структур данных, что достигается благодаря соединению независимых данных, или разделению зависимых;</li>
									<li>обфускация переупорядочения заключается в изменении последовательности объявления переменных, внутреннего расположения хранилищ данных, а также переупорядочивании методов, массивов (использование нетривиального представления многомерных массивов), определённых полей в структурах и т.д.</li>
								</ul>
							</p>
							<p>
								Обфускация управления осуществляет запутывание потока управления, то есть последовательность выполнения программного кода. Методы, позволяющие осуществить обфускацию управления, классифицируются на три основных группы:
								<ul>
									<li>вычислительная обфускация, которая  реализуется расширением условий циклов, добавлением недостижимого исходного кода, устранением библиотечных вызовов (если это возможно) и добавлением мёртвого (недостижимого) кода;</li>
									<li>обфускация соединения, при этом происходит объединение или разделение определённых фрагментов кода программы для того, чтобы убрать логические связи между ними;</li>
									<li>обфускация последовательности заключается в переупорядочивании блоков (инструкций переходов), циклов, выражений. [<a href="http://citforum.ru/security/articles/obfus/" target="_blank">2</a>] </li>
								</ul>
							</p>
							<p>
								На данный момент существует несколько обфускаторов для JavaScript, но необходимо отметить, что все обфускаторы кроме Google Closure Compiler являются в первую очередь упаковщиками или минификаторами (программы, которые минимизируют размер исходного кода, выполняют оптимизацию для увеличения производительности), а уже как следствие, они являются обфускаторами.
							</p>
							<p>
								Сравнивая популярные упаковщики (YUIpacker и Packer) были проведены эксперименты по минимизации JavaScript библиотеки JQuery и получили такие результаты: YUIpacker сжал неупакованную версию библиотеки до 0.47 от оригинального размера, Packer сжал до 0.34 от оригинального размера. Можно сделать вывод, что лучшим из них является Packer.
							</p>
							<p>
								Однако данные программы не являются обфускаторами, которые выполняют сложные преобразования над исходным кодом программы, как упоминалось выше.
							</p>
							<p>
								Также был рассмотрен коммерческий продукт JavaScriptObfuscator v2.18 [<a href="https://www.javascriptobfuscator.com/" target="_blank">3</a>], который предлагает бесплатную демонстрационную версию, обеспечивающий минимальную обфускацию на уровне упаковщиков. При обфускации JQuery исходный файл был обфусцирован до 0.38 от оригинального размера, но там не обфусцированы типы данных, поток логики приложения и т.д.
							</p>
							<p>
								Google Closure Compiler разработан таким образом, чтобы на этапе написания кода необходимо было готовить код к обфускации, соблюдая определённые правила и добавляя определённые аннотации. Так как это не представляется возможным сделать для библиотеки JQuery, то степень сжатия и обфускации Google Closure Compiler невозможно сравнить в данном контексте.
							</p>
							<p>
								Так как в настоящее время нет обфускатора с открытым исходным кодом, который сможет предоставлять продвинутые способы обфускации, то создание такого обфускатора  для языка JavaScript является актуальным.
							</p>
							<p>
								После анализа существующих обфускаторов для языка JavaScript, была  разработана диаграмма прецедентов (см. рис. 1).
							</p>
							<div class="row justify-content-center">
								<figure class="figure">
									<img src="../obfuscating-images/use-case-diagram.png" class="figure-img img-fluid" alt="UML диаграмма прецедентов">
									<figcaption class="figure-caption text-center">Рисунок 1 &ndash; UML диаграмма прецедентов</figcaption>
								</figure>
							</div>
							<p>
								На данном этапе разработки появилась задача распознавания исходного кода программы и построение абстрактного синтаксического дерева. Так как это задача достаточно объёмная, то для ускорения разработки необходимо использовать готовое решение (библиотеку). Сравнивая существующие синтаксические анализаторы, были обнаружены два лидера: библиотека Esprima [<a href="http://esprima.org/" target="_blank">4</a>] от JQuery и встроенный интерпретатор JavaScript  Nashorn (потомок Rhino) [<a href="https://ru.wikipedia.org/wiki/Nashorn_(движок_JavaScript)" target="_blank">5</a>] от Oracle.
							</p>
							<p>
								Esprima &ndash; это библиотека на JavaScript для разбора исходного кода того же языка, но так как разработка программного продукта планируется на языке Java, то предпочтение отдано Nashorn, хотя в разработке не будет задействован весь интерпретатор, а только синтаксический анализатор. Nashorn будет принимать на вход исходный код JavaScript и возвращать в виде результата текст в формате JSON (см. рис. 2), с которым уже можно тесно взаимодействовать и использовать для проведения обфускации.
							</p>
							<div class="row justify-content-center">
								<figure class="figure">
									<img src="../obfuscating-images/source-code-analysis.png" class="figure-img img-fluid" alt="Пример разбора исходного кода JavaScript">
									<figcaption class="figure-caption text-center">Рисунок 2 &ndash; Пример разбора исходного кода JavaScript</figcaption>
								</figure>
							</div>
							<p>
								Исходя из того факта, что использование готового синтаксического анализатора языка упростило работу, можно сделать акцент на применении различных стратегий обфускации. Таким образом, первый вид обфускации, который будет использован &ndash; это лексическая обфускация, наиболее простая в реализации и показывающая наибольший эффект. Вторым видом используемой обфускации будет обфускация управления, которая также показывает хорошие показатели эффективности. И, конечно, будет использовано кодирование строковых и числовых констант.
							</p>
							<p>
								В данной работе были рассмотрены понятия обфускатора и обфускации. Также были представлены основные принципы обфусцирующего преобразования исходного кода, предложена UML диаграмма прецедентов для разрабатываемого обфускатора.
							</p>
							<p>
								Исходя из результатов, полученных в ходе анализа существующих обфускаторов, можно сказать, что создание обфускатора с открытым исходным кодом для языка JavaScript,  обеспечивающего возможность использования продвинутых запутывающих преобразований, актуально и востребовано.
							</p>
							<p class="text-center h4"><b>
								Литература
							</b></p>
							<ol>
								<li>Википедия. Обфускация [электронный ресурс]. &ndash; Режим доступа: <a href="https://ru.wikipedia.org/wiki/Обфускация" target="_blank">https://ru.wikipedia.org/wiki/Обфускация</a></li>
								<li>LynX. Обфускация и защита программных продуктов // CITForum.  [электронный ресурс]. &ndash; Режим доступа: <a href="http://citforum.ru/security/articles/obfus/" target="_blank">http://citforum.ru/security/articles/obfus/</a></li>
								<li>JavaScriptObfuscator. Canada [электронный ресурс]. &ndash; Режим доступа: <a href="https://www.javascriptobfuscator.com/" target="_blank">https://www.javascriptobfuscator.com/</a></li>
								<li>Esprima [электронный ресурс]. &ndash; Режим доступа: <a href="http://esprima.org/" target="_blank">http://esprima.org/</a></li>
								<li>Nashorn [электронный ресурс]. &ndash; Режим доступа: <a href="https://ru.wikipedia.org/wiki/Nashorn_(движок_JavaScript)" target="_blank">https://ru.wikipedia.org/wiki/Nashorn_(движок_JavaScript)</a></li>
							</ol>
						</div>
					</div>
					<!--/.Card-->
				</div>
			</div>
		</div>
	</div>


	<footer class="page-footer center-on-small-only stylish-color-dark">
		<!--Social buttons-->
		<div class="social-section text-center container-fluid">
			<div class="row">
				<div class="col">
					<h1>Контакты</h1>
				</div>
				<!-- Social -->
				<div class="col-6">
					<ul>
						<li>
							<a href="https://github.com/smedgaus" target="_blank">
								<button type="button" class="btn btn-elegant text-capitalize">
									<i class="fa fa-git"></i>
								</button>
							</a>
						</li>
						<li>
							<a href="https://vk.com/smedgaus" target="_blank">
								<button type="button" class="btn unique-color text-capitalize">
									<i class="fa fa-vk"></i>
								</button>
							</a>
						</li>
						<li>
							<a href="https://www.linkedin.com/in/sergey-medgaus-70b22a78/"  target="_blank">
								<button type="button" class="btn special-color text-capitalize">
									<i class="fa fa-linkedin"></i>
								</button>
							</a>
						</li>
						<li>
							<a href="https://www.facebook.com/smedgaus"  target="_blank">
								<button type="button" class="btn indigo darken-3 text-capitalize">
									<i class="fa fa-facebook"></i>
								</button>
							</a>
						</li>
						<li>
							<a href="https://play.google.com/store/apps/developer?id=MedgausApps"  target="_blank">
								<button type="button" class="btn green darken-2 text-capitalize">
									<i class="fa fa-android"></i>
								</button>
							</a>
						</li>
					</ul>
				</div>
				<div class="col text-left">
					<i class="fa fa-skype mr-1"></i> sergey.medgaus <br/>
					<a href="mailto:medgaus-sergey@yandex.com">
						<i class="fa fa-envelope mr-1"></i> medgaus-sergey@yandex.com
					</a>
				</div>
			</div>

		</div>
		<!--/.Social buttons-->

		<!--Copyright-->
		<div class="footer-copyright">
			<div class="row">
				<div class="col clearfix">
					<span class="float-left ml-4">Copyright 2017 <i class="fa fa-copyright"></i> Sergey Medgaus</span>
				</div>
			</div>

		</div>
		<!--/.Copyright-->
	</footer>

	<!-- SCRIPTS -->
	<!-- JQuery -->
	<script type="text/javascript" src="../../js/jquery-3.1.1.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="../../js/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="../../js/mdb.min.js"></script>

	<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>

</body>
</html>
