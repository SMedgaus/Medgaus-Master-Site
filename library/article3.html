<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Медгаус С.В., Чернышова А.В. &ndash; Проектирование обфускатора для языка JavaScript</title>
	<!-- Bootstrap core CSS -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Bootstrap -->
	<link href="../css/mdb.min.css" rel="stylesheet">
	<!-- Your custom styles (optional) -->
	<link href="../css/style.css" rel="stylesheet">
</head>

<body>
	<div class="mr-5 pr-5 ml-5 pl-5">
		<!--Navbar-->
		<nav class= "navbar fixed-top navbar-expand-lg navbar-dark stylish-color">
			<!-- Collapse button -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
			aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
			<!-- Collapsible content -->
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<!-- Links -->
				<ul class="navbar-nav mx-auto">
					<li class="nav-item">
						<a class="nav-link" href="../index.html"><img src="../images/icons/cv.svg" class="mr-1" width="18px" height="18px">Резюме</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../bio/bio_ru.html"><img src="../images/icons/bio.svg" class="mr-1" width="18px" height="18px">Биография</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../abstract/abstract_ru.html"><img src="../images/icons/dissertation.svg" class="mr-2" width="18px" height="18px">Реферат</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="../library/library_ru.html"><img src="../images/icons/library.svg" class="mr-2" width="18px" height="18px">Библиотека</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../links/links_ru.html"><img src="../images/icons/links.svg" class="mr-2" width="18px" height="18px">Ссылки</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../report/report_ru.html"><img src="../images/icons/search.svg" class="mr-2" width="18px" height="18px">Отчёт о поиске</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="../individual/ind_ru.html">
							<img src="../images/icons/individual.svg" class="mr-1" width="18px" height="18px">Индивидуальный раздел
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="http://donntu.org" target="_blank">
							<img src="../images/icons/university.svg" class="mr-1" width="18px" height="18px" alt="ДонНТУ" title="ДонНТУ">
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="http://masters.donntu.org" target="_blank">
							<img src="../images/icons/masters.svg" class="mr-1" width="18px" height="18px" alt="Портал магистров" title="Портал магистров">
						</a>
					</li>
				</ul>
				<!-- Links -->
			</div>
			<!-- Collapsible content -->
		</nav>
		<!--/.Navbar-->

		<div class="mb-1 mt-5 pt-3">
			<!--Back arrow-->
			<div class="sticky" style="position: fixed; top: 60px; left: 20px; font-size: 4rem;">
				<a href="library_ru.html#article3" target="_self">
					<img src="../images/icons/back-arrow.svg" alt="" class="z-depth-1 hoverable rounded-circle" width="60rm" height="60rm">
				</a>
			</div>

			<!--Card-->
			<div class="card">
				<!--Card content-->
				<div class="card-body text-justify">
					<p class="text-left">
						УДК 004.056.5
					</p>
					<p class="text-center h4"><b>
						Проектирование обфускатора для языка JavaScript
					</b></p>
					<p>
						<b>Авторы:</b> Медгаус С.В., Чернышова А.В.
					</p>
					<p>
						<b>Источник:</b> Информатика, управляющие системы, математическое и компьютерное моделирование в рамках II форума «Инновационные перспективы Донбасса» (ИУСМКМ &ndash; 2016): VII Международная научно-техническая конференция, 26 мая 2016, г. Донецк: / Донец. национал. техн. ун-т; редкол. А.Ю. Харитонов и др. &ndash; Донецк: ДонНТУ, 2016. с. 167 &ndash; 173. [<a href="http://iuskm.donntu.org/electronic/iusmkm2016.pdf" target="_blank">ссылка на сборник</a>]
					</p>
					<p>
						<b>Аннотация: </b>
						<i>
							В тексте данной статьи описан процесс обфускации и существующие обфускаторы для языка JavaScript. Исходя из анализа существующих обфускаторов, была предложена разработка обфускатора языка JavaScript с открытым кодом, реализующая сложные преобразования исходного кода, а также основные алгоритмы обфускации, которые будут использоваться в реализации программного продукта.
						</i>
					</p>
					<p class="h4">
						Общая постановка проблемы
					</p>
					<p>
						На сегодняшний день проблема сохранения прав на владение интеллектуальной собственностью стоит очень остро. В то время, как настольные приложения могут обеспечить себя различными средствами лицензирования и защиты, веб-приложения не могут защитить свой код, расположенный на стороне клиента от просмотра и изучения.
					</p>
					<p>
						Частично эту проблему решает перенос особенно важных частей кода на сторону сервера, что повлечёт за собой увеличение нагрузки на сервер и может потребовать увеличения мощности сервера или покупки дополнительного оборудования.
					</p>
					<p>
						Также решению этой проблемы может поспособствовать обфускация программного кода, передающегося клиенту. Обфускация не решит эту проблему полностью, так как возможность использовать реверс-инжиниринг остаётся, но вот потенциальная сложность деобфускации и большие человеческие ресурсы должны отбить желание у злоумышленников разбирать чужой код и извлекать из него алгоритмы.
					</p>
					<p>
						Обфускация (от лат. obfuscare &ndash; затенять, затемнять; и англ. obfuscate &ndash; делать неочевидным, запутанным, сбивать с толку) или запутывание кода &ndash; приведение исходного текста или исполняемого кода программы к виду, сохраняющему его функциональность, но затрудняющему анализ и понимание алгоритмов работы.
					</p>
					<p>
						Существуют специальные программы, производящие обфускацию, так называемые обфускаторы [<a href="https://ru.wikipedia.org/wiki/Обфускация" target="_blank">1</a>].
					</p>
					<p class="h4">
						Существующие обфускаторы
					</p>
					<p>
						На данный момент существует несколько обфускаторов для JavaScript, но необходимо отметить, что все обфускаторы кроме Google Closure Compiler являются в первую очередь упаковщиками или минификаторами (программы, которые минимизируют размер исходного кода, выполняют оптимизацию для увеличения производительности), а уже как следствие, они являются обфускаторами. Были рассмотрены такие популярные упаковщики как YUI Compressor [<a href="https://github.com/yui/yuicompressor" target="_blank">2</a>] и Packer [<a href="http://dean.edwards.name/packer/" target="_blank">3</a>].
					</p>
					<p>
						Однако данные программы не являются обфускаторами, которые выполняют сложные преобразования над исходным кодом программы, как упоминалось выше.
					</p>
					<p class="h4">
						Проектирование собственного обфускатора
					</p>
					<p>
						Так как в настоящее время нет обфускатора с открытым исходным кодом, который сможет предоставлять продвинутые способы обфускации, то создание такого обфускатора  для языка JavaScript является актуальным.
					</p>
					<p>
						После анализа существующих обфускаторов для языка JavaScript, была  разработана диаграмма прецедентов для будущего обфускатора (см. рис. 1). На ней изображён один актёр (Пользователь), который может загрузить файл для обфускации, включить нужные продвинутые режимы обфускации и обфусцировать файл. После чего, может сохранить запутанный файл.
					</p>
					<div class="row justify-content-center">
						<figure class="figure">
							<img src="obfuscating-images/use-case-diagram-2.0.png" class="figure-img img-fluid mx-auto d-block" alt="UML диаграмма прецедентов">
							<figcaption class="figure-caption text-center">Рисунок 1 &ndash; UML диаграмма прецедентов</figcaption>
						</figure>
					</div>
					<p>
						Исходя из диаграммы прецедентов, была разработана диаграмма классов (см. рис. 2), на которой отображена основная структура проектируемого приложения.
					</p>
					<p>
						Пользователь будет напрямую взаимодействовать с классом MainForm, так как все методы для манипуляции исходным файлом (загрузка в программу, обфускация и сохранение) будут находиться в нём. Также в этом классе будет предоставлена возможность пользователю выбрать режим обфускации с помощью флажков, расположенных на форме. Класс MainForm содержит в себе класс Obfuscator, который и предоставляет возможность обфусцировать исходный код.
					</p>
					<p>
						Класс Obfuscator содержит список объектов, реализующих функциональный интерфейс Mangler, который содержит всего один метод – обфусцировать исходный код, а уже реализации этого интерфейса конкретизируют, как именно они будут запутывать код. Этот подход обеспечивает унифицированность при работе с объектами-запутывателями, позволяя вызывать один метод для каждого объекта при разной реализации (принцип полиморфизма). Более того, полиморфизм позволяет с лёгкостью добавлять новые алгоритмы обфускации, что намного упрощает процесс разработки.
					</p>
					<div class="row justify-content-center">
						<figure class="figure">
							<img src="obfuscating-images/class-diagram.png" class="figure-img img-fluid mx-auto d-block" alt="UML диаграмма классов">
							<figcaption class="figure-caption text-center">Рисунок 2 &ndash; UML диаграмма классов</figcaption>
						</figure>
					</div>
					<p>
						Далее была разработана диаграмма состояний для демонстрации состояний главной формы приложения, в которых она может находиться в процессе функционирования (см. рис. 3). Таких состояний несколько: ожидание действий пользователя, загрузка исходного кода из файла, обфускация исходного кода и сохранение обфусцированного кода в файл.
					</p>
					<div class="row justify-content-center">
						<figure class="figure">
							<img src="obfuscating-images/state-diagram.png" class="figure-img img-fluid mx-auto d-block" alt="UML диаграмма состояний">
							<figcaption class="figure-caption text-center">Рисунок 3 &ndash; UML диаграмма состояний</figcaption>
						</figure>
					</div>
					<p>
						Для того чтобы проводить обфусцирующие преобразования с кодом необходимо получить абстрактное синтаксическое дерево (АСД). Эту задачу отлично выполняет библиотека от JQuery Esprima [<a href="http://esprima.org/" target="_blank">4</a>]. Она позволяет получить АСД из исходного кода JavaScript в формате JSON (см. рис. 4). Эту библиотеку можно использовать и для генерации кода по АСД, что значительно упрощает проведение обфускации.
					</p>
					<div class="row justify-content-center">
						<figure class="figure">
							<img src="obfuscating-images/source-code-analysis.png" class="figure-img img-fluid mx-auto d-block" alt="Пример разбора исходного кода">
							<figcaption class="figure-caption text-center">Рисунок 4 &ndash; Пример разбора исходного кода</figcaption>
						</figure>
					</div>
					<p class="h4">
						Способы обфускации
					</p>
					<p>
						Планируется реализовать следующие алгоритмы запутывания: 
						<ul>
							<li>подстановка константных переменных в коде;</li>
							<li>запутывание условных конструкций;</li>
							<li>преобразование циклов;</li>
							<li>кодирование строковых и числовых констант.</li>
						</ul>
					</p>
					<p>
						Подстановка константных переменных заключается в том, чтобы заменить использованные константы в коде на их значение, таким образом появятся «магические числа», которые затрудняют понимание кода.
					</p>
					<p>
						Способ запутывания условных конструкций сводится к добавлению «непрозрачных предикатов», значение которых известно на этапе запутывания, но его трудно узнать на этапе разбора кода. Также используется вызов функций, которые возвращают случайные булевы значения. Их можно использовать таким образом, чтобы они не влияли на общее значение логического выражения, но в то же время мешали ясному пониманию кода.
					</p>
					<p>
						Преобразование циклов включает в себя несколько различных видов преобразований. Первый вид – это трансформация циклов, заключающаяся в том, чтобы один цикл разбить на несколько, просто разделив между ними итерации. Второй – это развёртка циклов. Суть этого вида преобразования в том, что если на этапе разбора кода мы знаем, сколько итераций цикл будет выполняться, то в процессе обфускации мы можем вынести инструкции тела цикла за цикл и повторить там несколько раз, уменьшив при этом итерации самого цикла. И последний вид преобразований циклов – это разделение циклов. Это преобразование заключается в том, чтобы разделить инструкции исходного цикла и поместить в два цикла с исходным количеством итераций. Для большего эффекта запутывания рекомендуется применять все виды преобразований для циклов [<a href="http://citforum.ru/security/articles/obfus/" target="_blank">5</a>].
					</p>
					<p>
						Кодирование строковых констант может включать в себя: преобразование констант в кодировку BASE64; добавление новых функций, которые могут «собирать по частям» константы; записывание строк в виде кодов Unicode-символов, которые можно представлять в виде целых чисел и впоследствии можно запутать.
					</p>
					<p>
						Кодирование числовых констант достаточно сложное преобразование. Это преобразование рационально разделить на преобразование целых и вещественных чисел. Алгоритм кодирования числовых констант представлен на рисунке 5.
					</p>
					<div class="row justify-content-center">
						<figure class="figure">
							<img src="obfuscating-images/coding-numbers-algorithm.png" class="figure-img img-fluid mx-auto d-block" alt="Алгоритм кодирования числовых констант">
							<figcaption class="figure-caption text-center">Рисунок 5 &ndash; Алгоритм кодирования числовых констант</figcaption>
						</figure>
					</div>
					<p class="h4">
						Выводы
					</p>
					<p>
						В данной работе рассмотрены понятия обфускатора и обфускации. Также спроектированы UML диаграммы прецедентов, классов и состояний для разрабатываемого обфускатора. Рассмотрена возможность использования вспомогательной библиотеки Esprima для разбора исходного кода и генерации кода по АСД. Уточнены алгоритмы обфускации, а также способы их реализации. 
					</p>

					<p class="text-center h4"><b>
						Литература
					</b></p>
					<ol>
						<li>Википедия. Обфускация [электронный ресурс]. &ndash; Режим доступа: <a href="https://ru.wikipedia.org/wiki/Обфускация" target="_blank">https://ru.wikipedia.org/wiki/Обфускация</a></li>
						<li>YUI Compressor [электронный ресурс]. &ndash; Режим доступа: <a href="https://github.com/yui/yuicompressor" target="_blank">https://github.com/yui/yuicompressor</a></li>
						<li>Packer [электронный ресурс]. &ndash; Режим доступа: <a href="http://dean.edwards.name/packer/" target="_blank">http://dean.edwards.name/packer/</a></li>
						<li>Esprima [электронный ресурс]. &ndash; Режим доступа: <a href="http://esprima.org/" target="_blank">http://esprima.org/</a></li>
						<li>LynX. Обфускация и защита программных продуктов // CITForum.  [электронный ресурс]. &ndash; Режим доступа: <a href="http://citforum.ru/security/articles/obfus/" target="_blank">http://citforum.ru/security/articles/obfus/</a></li>
					</ol>
				</div>
			</div>
			<!--/.Card-->
		</div>
	</div>


	<footer class="page-footer center-on-small-only stylish-color-dark">
		<!--Social buttons-->
		<div class="social-section text-center container-fluid">
			<div class="row">
				<div class="col">
					<h1>Контакты</h1>
				</div>
				<!-- Social -->
				<div class="col-6">
					<ul>
						<li>
							<a href="https://github.com/smedgaus" target="_blank">
								<button type="button" class="btn btn-elegant text-capitalize">
									<img src="../images/icons/git.svg" width="18px" height="18px">
								</button>
							</a>
						</li>
						<li>
							<a href="https://vk.com/smedgaus" target="_blank">
								<button type="button" class="btn unique-color text-capitalize">
									<img src="../images/icons/vk.svg" width="18px" height="18px">
								</button>
							</a>
						</li>
						<li>
							<a href="https://www.linkedin.com/in/sergey-medgaus-70b22a78/"  target="_blank">
								<button type="button" class="btn special-color text-capitalize">
									<img src="../images/icons/linkedin.svg" width="18px" height="18px">
								</button>
							</a>
						</li>
						<li>
							<a href="https://www.facebook.com/smedgaus"  target="_blank">
								<button type="button" class="btn indigo darken-3 text-capitalize">
									<img src="../images/icons/facebook.svg" width="18px" height="18px">
								</button>
							</a>
						</li>
						<li>
							<a href="https://play.google.com/store/apps/developer?id=MedgausApps"  target="_blank">
								<button type="button" class="btn green darken-2 text-capitalize">
									<img src="../images/icons/android.svg" width="18px" height="18px">
								</button>
							</a>
						</li>
					</ul>
				</div>
				<div class="col text-left">
					<img src="../images/icons/skype.svg" class="mr-1" width="18px" height="18px"> sergey.medgaus <br/>
					<a href="mailto:medgaus-sergey@yandex.com">
						<img src="../images/icons/mail.svg" class="mr-1" width="18px" height="18px"> medgaus-sergey@yandex.com
					</a>
				</div>
			</div>

		</div>
		<!--/.Social buttons-->

		<!--Copyright-->
		<div class="footer-copyright">
			<div class="row">
				<div class="col clearfix">
					<span class="float-left ml-4">Copyright 2017 &#169; Sergey Medgaus</span>
				</div>
			</div>

		</div>
		<!--/.Copyright-->
	</footer>

	<!-- SCRIPTS -->
	<!-- JQuery -->
	<script type="text/javascript" src="../js/jquery-3.1.1.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="../js/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="../js/mdb.min.js"></script>

	<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>

</body>
</html>
